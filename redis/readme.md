### Redis

Redis是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。

#### 缓存雪崩

缓存雪崩表示在某一时间段，缓存集中失效，导致请求全部走数据库，有可能搞垮数据库，使整个服务瘫痪。

##### 使缓存集中失效的原因：

1. redis服务器挂掉了。
2. 对缓存数据设置了相同的过期时间，导致某时间段内缓存集中失效。

##### 如何解决缓存集中失效：

1. 针对原因1，可以实现redis的高可用，Redis Cluster 或者 Redis Sentinel(哨兵) 等方案。
2. 针对原因2，设置缓存过期时间时加上一个随机值，避免缓存在同一时间过期。
3. 使用双缓存策略，设置两个缓存，原始缓存和备用缓存，原始缓存失效时，访问备用缓存，备用缓存失效时间设置长点。

#### 缓存穿透

缓存穿透表示查询一个一定不存在的数据，由于没有获取到缓存，所以没写入缓存，导致这个不存在的数据每次都需要去数据库查询，失去了缓存的意义。请求的数据大量的没有获取到缓存，导致走数据库，有可能搞垮数据库，使整个服务瘫痪。
比如文章表，一般我们的主键ID都是无符号的自增类型，有些人想要搞垮你的数据库，每次请求都用负数ID，而ID为负数的记录在数据库根本就没有。

##### 解决方案：

1. 对于像ID为负数的非法请求直接过滤掉；采用布隆过滤器(Bloom Filter，不通过则一定不存在，但通过了不一定存在；通过了再去查缓存，查不到缓存再查数据库)做预检查。
2. 针对在数据库中找不到记录的，我们仍然将该空数据存入缓存中，当然一般会设置一个较短的过期时间。

#### 缓存击穿

缓存击穿表示某个key的缓存非常热门，有很高的并发一直在访问，如果该缓存失效，那同时会走数据库，压垮数据库。
缓存击穿与缓存雪崩的区别是这里针对的是某一热门key缓存，而雪崩针对的是大量缓存的集中失效。

##### 解决方案：

1. 让该热门key的缓存永不过期。
2. 查询数据库和更新缓存时使用redis的setnx互斥锁，避免多个更新操作同时执行。

### SpringCache

SpringCache相当于一个抽象接口,在其底层可以切换各种Cache的实现,当缓存数据时,只需要注入SpringCache对应的注解,即可实现缓存的功能,大大的提高了缓存的效率
Springcache默认的缓存实现是simple（内存级），当然可以更换成其他实现，常见的有如下:

- EhCache：此缓存框架一直伴随着Spring，Hibernate，Mybatis等等。在SpringBoot出来之前都已经广泛的使用来做为一级缓存
- Guava: Google出品的框架，也支持缓存
- Redis：在我们日常开发之中经常使用的；并且被大众广泛接受的速度极快的缓存
- memcached：是一个高性能的分布式内存对象缓存系统,用于动态Web应用以减轻数据库负载。

| CacheManager              | 描 述                                                               |
| ------------------------- | ------------------------------------------------------------------- |
| SimpleCacheManager        | 使用简单的 Collection 来存储缓存，主要用来测试用途                  |
| ConcurrentMapCacheManager | 使用 ConcurrentMap 来存储缓存                                       |
| NoOpCacheManager          | 仅测试用途，不会实际存储缓存                                        |
| EhCacheCacheManager       | 使用 EhCache 作为缓存技术                                           |
| GuavaCacheManager         | 使用 Google Guava 的 GuavaCache 作为缓存技术                        |
| HazelcastCacheManager     | 使用 Hazelcast 作为缓存技术                                         |
| JCacheCacheManager        | 支持 JCache（JSR-107）标准的实现作为缓存技术，如 Apache Commons JCS |
| RedisCacheManager         | 使用 Redis 作为缓存技术                                             |


### 参考资料
https://developer.aliyun.com/article/1478102
